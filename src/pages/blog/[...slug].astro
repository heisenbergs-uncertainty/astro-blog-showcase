---
import { getCollection } from "astro:content";
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
    const posts = await getCollection("blog");
    return posts.map((post) => ({
        params: { slug: post.slug },
        props: post,
    }));
}

const post = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title}>
    <section class="section">
        <div class="container" style="max-width: 800px;">
            <article
                class="content is-medium glass-panel p-6"
                style="border-radius: 12px;"
            >
                {
                    post.data.heroImage && (
                        <img
                            width={1020}
                            height={510}
                            src={post.data.heroImage}
                            alt=""
                            class="mb-4"
                            style="border-radius: 8px;"
                        />
                    )
                }
                <h1 class="title is-2">{post.data.title}</h1>
                <div class="subtitle is-6 has-text-grey-light">
                    <time datetime={post.data.pubDate.toISOString()}>
                        {
                            post.data.pubDate.toLocaleDateString("en-us", {
                                year: "numeric",
                                month: "long",
                                day: "numeric",
                            })
                        }
                    </time>
                </div>
                <hr style="background-color: rgba(255,255,255,0.1);" />
                <Content />
            </article>
        </div>
    </section>
</Layout>
